# Back-End

Heroku link:

https://spidergraph-backend.herokuapp.com/

Summary of Endpoints:

| Type | Route  | Description   |
|---|---|---|
| POST  | /api/auth/register   | Register user  |
| POST  | /api/auth/login  | Login user  |
| GET  | /api/users/:id  | Get a specific user  |
| PUT   | /api/users/:id  | Update a specific user  |
| DELETE  | /api/users/:id  | Delete a specific user   |
| POST  | /api/graphs  | Add a graph  |
| GET  | /api/graphs/:id  | Retrieve a specific graph   |
| PUT  | /api/graphs/:id   | Update a specific graph  |
| DELETE  | /api/graphs/:id   | Delete a specific graph  |
|   |   |   |

Endpoint Details:

### POST to /api/auth/register

```
{
    "username": "string", // required
    "password": "", // required
    "name": "string", // required
    "email": "string" // unique, required
}
```
- Will return a JSON object containing all of the information in the request, the User ID generated by the database, and an authorization token. The token will be generated upon registration so that they can immediately be redirected to a restricted page without having to be re-authorized.

### POST to /api/auth/login

```
{
	"username": "string",
	"password": "string"
}
```
- Will return a JSON object containing the username and an authorization token.

### GET to /api/users/:id

- Will return a JSON object with the following structure:

```
{
    "id": 1,
    "username": "patrick",
    "password": "$2a$10$8wVEOJTAY4WcFA.7zA0tLefRr1tbgVG9sZUdwKwosOeiaXtBg6HQ2",
    "name": "Patrick",
    "email": "patrick@test.com"
}
```

### PUT to /api/users/:id

- Send request with desired changes. Server will return a JSON object with all of the user information. The changes will be reflected in the fields that were updated.

### DELETE to /api/users/:id

- Send request to delete user. If the request was successful the server will send the following response:

```
{
    "message": "The user was successfully deleted"
}
```
### POST to /api/graphs

- Send the request with the following format. Note that all fields are required.

```
{
	"graph_name": "test",
	"dataset": [1,2,3,4],
	"user_id": "1"
}
```

- The database will return a JSON object with the following structure:

```
{
    "id": 2,
    "graph_name": "test",
    "dataset": [
        1,
        2,
        3,
        4
    ],
    "user_id": 1
}
```

### GET to /api/graphs/:id

- Will return a JSON object with the following structure:

```
{
    "id": 2,
    "graph_name": "test",
    "dataset": [
        1,
        2,
        3
    ],
    "user_id": 1
}
```

### PUT to /api/graphs/:id

- Send request with desired changes. Server will return a JSON object with all of the graph information. The changes will be reflected in the fields that were updated.

### DELETE to /api/graphs/:id

- Send request to delete graph. If the request was successful the server will send the following response:

```
{
    "message": "The graph was successfully deleted"
}
```

### TO DO

- [x] - Create CRUD endpoints for Users
- [ ] - Write middleware for Users endpoints (validate user id, etc.)
- [x] - Add tables for handling graph data
- [x] - Write endpoints for graphs
- [x] - Wire up authentication middleware
- [ ] - Write tests
- [ ] - Set up test database for development